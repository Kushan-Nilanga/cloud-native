<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1612px" preserveAspectRatio="none" style="width:691px;height:1612px;background:#FFFFFF;" version="1.1" viewBox="0 0 691 1612" width="691px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="300.3516"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="621.457"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="1013.1836"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="1269.668"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="69" x2="69" y1="67.4883" y2="1534.3945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="274.5" x2="274.5" y1="67.4883" y2="1534.3945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="445.5" x2="445.5" y1="67.4883" y2="1534.3945"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="590" x2="590" y1="67.4883" y2="1534.3945"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="12" y="56.5352">frontend-service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="5" y="1533.3945"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115" x="12" y="1553.9297">frontend-service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="230.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="237.5" y="56.5352">bff-service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="230.5" y="1533.3945"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="237.5" y="1553.9297">bff-service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="395.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="402.5" y="56.5352">auth-service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="395.5" y="1533.3945"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="402.5" y="1553.9297">auth-service</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="517" y="64.5352">Users (AWS Cognito)</text><path d="M572.5,15 C572.5,5 590.5,5 590.5,5 C590.5,5 608.5,5 608.5,15 L608.5,41 C608.5,51 590.5,51 590.5,51 C590.5,51 572.5,51 572.5,41 L572.5,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M572.5,15 C572.5,25 590.5,25 590.5,25 C590.5,25 608.5,25 608.5,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="517" y="1546.9297">Users (AWS Cognito)</text><path d="M572.5,1559.8828 C572.5,1549.8828 590.5,1549.8828 590.5,1549.8828 C590.5,1549.8828 608.5,1549.8828 608.5,1559.8828 L608.5,1585.8828 C608.5,1595.8828 590.5,1595.8828 590.5,1595.8828 C590.5,1595.8828 572.5,1595.8828 572.5,1585.8828 L572.5,1559.8828 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M572.5,1559.8828 C572.5,1569.8828 590.5,1569.8828 590.5,1569.8828 C590.5,1569.8828 608.5,1569.8828 608.5,1559.8828 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="684" x="0" y="98.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="98.1436" y2="98.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="101.1436" y2="101.1436"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="120" x="282" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="102" x="288" y="104.0566">SIGN UP FLOWS</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="684" x="0" y="141.4541"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="141.4541" y2="141.4541"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="144.4541" y2="144.4541"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="70" x="307" y="130.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="52" x="313" y="147.3672">Sign Up</text><polygon fill="#181818" points="262.5,181.4199,272.5,185.4199,262.5,189.4199,266.5,185.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="268.5" y1="185.4199" y2="185.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="76.5" y="180.6777">POST /api/auth/signup</text><path d="M74,198.4199 L74,223.4199 L205,223.4199 L205,208.4199 L195,198.4199 L74,198.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M195,198.4199 L195,208.4199 L205,208.4199 L195,198.4199 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="80" y="215.9883">{email, password}</text><polygon fill="#181818" points="433.5,246.041,443.5,250.041,433.5,254.041,437.5,250.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="439.5" y1="250.041" y2="250.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="281.5" y="245.2988">POST /api/signup</text><path d="M279,263.041 L279,288.041 L410,288.041 L410,273.041 L400,263.041 L279,263.041 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M400,263.041 L400,273.041 L410,273.041 L400,263.041 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="285" y="280.6094">{email, password}</text><path d="M385.5,300.3516 L485.5,300.3516 L485.5,307.6621 L475.5,317.6621 L385.5,317.6621 L385.5,300.3516 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="300.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="400.5" y="313.9199">aws-api</text><polygon fill="#181818" points="578.5,334.9727,588.5,338.9727,578.5,342.9727,582.5,338.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445.5" x2="584.5" y1="338.9727" y2="338.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="452.5" y="334.2305">POST /signup</text><polygon fill="#181818" points="456.5,364.2832,446.5,368.2832,456.5,372.2832,452.5,368.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="450.5" x2="589.5" y1="368.2832" y2="368.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="462.5" y="363.541">200 OK</text><polygon fill="#181818" points="285.5,400.5938,275.5,404.5938,285.5,408.5938,281.5,404.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="279.5" x2="444.5" y1="404.5938" y2="404.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="291.5" y="399.8516">200 OK</text><polygon fill="#181818" points="80.5,429.9043,70.5,433.9043,80.5,437.9043,76.5,433.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="273.5" y1="433.9043" y2="433.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="86.5" y="429.1621">200 OK</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="684" x="0" y="462.5596"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="462.5596" y2="462.5596"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="465.5596" y2="465.5596"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="64" x="310" y="451.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="46" x="316" y="468.4727">Sign In</text><polygon fill="#181818" points="262.5,502.5254,272.5,506.5254,262.5,510.5254,266.5,506.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="268.5" y1="506.5254" y2="506.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="76.5" y="501.7832">POST /api/auth/signin</text><path d="M74,519.5254 L74,544.5254 L205,544.5254 L205,529.5254 L195,519.5254 L74,519.5254 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M195,519.5254 L195,529.5254 L205,529.5254 L195,519.5254 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="80" y="537.0938">{email, password}</text><polygon fill="#181818" points="433.5,567.1465,443.5,571.1465,433.5,575.1465,437.5,571.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="439.5" y1="571.1465" y2="571.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="281.5" y="566.4043">POST /api/signin</text><path d="M279,584.1465 L279,609.1465 L410,609.1465 L410,594.1465 L400,584.1465 L279,584.1465 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M400,584.1465 L400,594.1465 L410,594.1465 L400,584.1465 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="285" y="601.7148">{email, password}</text><path d="M385.5,621.457 L485.5,621.457 L485.5,628.7676 L475.5,638.7676 L385.5,638.7676 L385.5,621.457 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="621.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="400.5" y="635.0254">aws-api</text><polygon fill="#181818" points="578.5,656.0781,588.5,660.0781,578.5,664.0781,582.5,660.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445.5" x2="584.5" y1="660.0781" y2="660.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="452.5" y="655.3359">POST /signin</text><polygon fill="#181818" points="456.5,685.3887,446.5,689.3887,456.5,693.3887,452.5,689.3887" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="450.5" x2="589.5" y1="689.3887" y2="689.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="462.5" y="684.6465">200 OK</text><polygon fill="#181818" points="285.5,721.6992,275.5,725.6992,285.5,729.6992,281.5,725.6992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="279.5" x2="444.5" y1="725.6992" y2="725.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="291.5" y="720.957">200 OK</text><path d="M375,738.6992 L375,763.6992 L440,763.6992 L440,748.6992 L430,738.6992 L375,738.6992 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M430,738.6992 L430,748.6992 L440,748.6992 L430,738.6992 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="381" y="756.2676">{token}</text><polygon fill="#181818" points="80.5,786.3203,70.5,790.3203,80.5,794.3203,76.5,790.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="273.5" y1="790.3203" y2="790.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="86.5" y="785.5781">200 OK</text><path d="M204,803.3203 L204,828.3203 L269,828.3203 L269,813.3203 L259,803.3203 L204,803.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M259,803.3203 L259,813.3203 L269,813.3203 L259,803.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="210" y="820.8887">{token}</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="684" x="0" y="854.2861"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="854.2861" y2="854.2861"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="857.2861" y2="857.2861"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="99" x="292.5" y="843.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="81" x="298.5" y="860.1992">Verify Email</text><polygon fill="#181818" points="262.5,894.252,272.5,898.252,262.5,902.252,266.5,898.252" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="268.5" y1="898.252" y2="898.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="76.5" y="893.5098">POST /api/auth/verify-email</text><path d="M74,911.252 L74,936.252 L139,936.252 L139,921.252 L129,911.252 L74,911.252 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M129,911.252 L129,921.252 L139,921.252 L129,911.252 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="80" y="928.8203">{token}</text><polygon fill="#181818" points="433.5,958.873,443.5,962.873,433.5,966.873,437.5,962.873" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="439.5" y1="962.873" y2="962.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="281.5" y="958.1309">POST /api/verify-email</text><path d="M279,975.873 L279,1000.873 L344,1000.873 L344,985.873 L334,975.873 L279,975.873 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,975.873 L334,985.873 L344,985.873 L334,975.873 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="285" y="993.4414">{token}</text><path d="M385.5,1013.1836 L485.5,1013.1836 L485.5,1020.4941 L475.5,1030.4941 L385.5,1030.4941 L385.5,1013.1836 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="1013.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="400.5" y="1026.752">aws-api</text><polygon fill="#181818" points="578.5,1047.8047,588.5,1051.8047,578.5,1055.8047,582.5,1051.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445.5" x2="584.5" y1="1051.8047" y2="1051.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="452.5" y="1047.0625">POST /verify-email</text><polygon fill="#181818" points="456.5,1077.1152,446.5,1081.1152,456.5,1085.1152,452.5,1081.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="450.5" x2="589.5" y1="1081.1152" y2="1081.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="462.5" y="1076.373">200 OK</text><polygon fill="#181818" points="285.5,1113.4258,275.5,1117.4258,285.5,1121.4258,281.5,1117.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="279.5" x2="444.5" y1="1117.4258" y2="1117.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="291.5" y="1112.6836">200 OK</text><polygon fill="#181818" points="80.5,1142.7363,70.5,1146.7363,80.5,1150.7363,76.5,1146.7363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="273.5" y1="1146.7363" y2="1146.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="86.5" y="1141.9941">200 OK</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="684" x="0" y="1175.3916"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="1175.3916" y2="1175.3916"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="684" y1="1178.3916" y2="1178.3916"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="118" x="283" y="1164.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="100" x="289" y="1181.3047">Authentication</text><polygon fill="#181818" points="433.5,1215.3574,443.5,1219.3574,433.5,1223.3574,437.5,1219.3574" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="274.5" x2="439.5" y1="1219.3574" y2="1219.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="281.5" y="1214.6152">POST /api/authenticate</text><path d="M279,1232.3574 L279,1257.3574 L344,1257.3574 L344,1242.3574 L334,1232.3574 L279,1232.3574 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M334,1232.3574 L334,1242.3574 L344,1242.3574 L334,1232.3574 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="285" y="1249.9258">{token}</text><path d="M385.5,1269.668 L485.5,1269.668 L485.5,1276.9785 L475.5,1286.9785 L385.5,1286.9785 L385.5,1269.668 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:1.5;" width="288.5" x="385.5" y="1269.668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="55" x="400.5" y="1283.2363">aws-api</text><polygon fill="#181818" points="578.5,1304.2891,588.5,1308.2891,578.5,1312.2891,582.5,1308.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="445.5" x2="584.5" y1="1308.2891" y2="1308.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="452.5" y="1303.5469">POST /authenticate</text><polygon fill="#181818" points="456.5,1333.5996,446.5,1337.5996,456.5,1341.5996,452.5,1337.5996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="450.5" x2="589.5" y1="1337.5996" y2="1337.5996"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="462.5" y="1332.8574">200 OK</text><polygon fill="#181818" points="285.5,1369.9102,275.5,1373.9102,285.5,1377.9102,281.5,1373.9102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="279.5" x2="444.5" y1="1373.9102" y2="1373.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="291.5" y="1369.168">200 OK</text><path d="M172,1386.9102 L172,1518.9102 L440,1518.9102 L440,1396.9102 L430,1386.9102 L172,1386.9102 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M430,1386.9102 L430,1396.9102 L440,1396.9102 L430,1386.9102 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="178" y="1404.4785">{"MFAOptions":null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="178" y="1419.7891">"PreferredMfaSetting":null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="178" y="1435.0996">"UserAttributes":[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="178" y="1450.4102">{"Name":"sub","Value":"&lt;sub&gt;"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="178" y="1465.7207">{"Name":"email_verified","Value":"true"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226" x="178" y="1481.0313">{"Name":"email","Value":"&lt;email&gt;"}],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="178" y="1496.3418">"UserMFASettingList":null,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="178" y="1511.6523">"Username":"&lt;uname&gt;"}</text><!--MD5=[5f86f3266bfdc8a9e6d2316d5a019007]
@startuml

participant "frontend-service" as front
participant "bff-service" as bff
participant "auth-service" as auth
database "Users (AWS Cognito)" as cognito



== SIGN UP FLOWS ==
== Sign Up ==

front -> bff: POST /api/auth/signup
note right of front: {email, password}

bff -> auth: POST /api/signup
note right of bff: {email, password}

group aws-api
    auth -> cognito: POST /signup
    cognito - -> auth: 200 OK
end

auth - -> bff: 200 OK

bff - -> front: 200 OK

== Sign In ==

front -> bff: POST /api/auth/signin
note right of front: {email, password}

bff -> auth: POST /api/signin
note right of bff: {email, password}

group aws-api
    auth -> cognito: POST /signin
    cognito - -> auth: 200 OK
end

auth - -> bff: 200 OK
note left of auth: {token}

bff - -> front: 200 OK
note left of bff: {token}

== Verify Email ==

front -> bff: POST /api/auth/verify-email
note right of front: {token}

bff -> auth: POST /api/verify-email
note right of bff: {token}

group aws-api
    auth -> cognito: POST /verify-email
    cognito - -> auth: 200 OK
end

auth - -> bff: 200 OK

bff - -> front: 200 OK

== Authentication ==

bff -> auth: POST /api/authenticate
note right of bff: {token}

group aws-api
    auth -> cognito: POST /authenticate
    cognito - -> auth: 200 OK
end

auth - -> bff: 200 OK
note left of auth
    {"MFAOptions":null,
    "PreferredMfaSetting":null,
    "UserAttributes":[
    {"Name":"sub","Value":"<sub>"},
    {"Name":"email_verified","Value":"true"},
    {"Name":"email","Value":"<email>"}],
    "UserMFASettingList":null,
    "Username":"<uname>"}
end note

@enduml

PlantUML version 1.2022.7(Tue Aug 23 03:01:30 AEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>